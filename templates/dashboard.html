{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <h3>彩礼数据可视化分析</h3>
        <div id="chart" style="width: 100%;height:600px;"></div>
    </div>
</div>

<script>
$(document).ready(function(){
    var chart = echarts.init(document.getElementById('chart'));
    
    $.get('/api/statistics', function(data){
        var option = {
            title: { text: '各省份彩礼金额统计' },
            tooltip: {},
            xAxis: {
                data: data.map(item => item._id)
            },
            yAxis: {},
            series: [{
                name: '平均金额',
                type: 'bar',
                data: data.map(item => item.avg_amount)
            }]
        };
        chart.setOption(option);
    });
});
</script>
{% endblock %}